<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/resources/css/style1.css">
    <title>English MCE - Take the test</title>
</head>
<body>
<div id="squeeze" class="containers">

    <div style="display: flex;">
        <form id="verification" action="verify" method="post" accept-charset="UTF-8" enctype="text/plain"
              onclick="choose()">
            <div id="divtest">
                <input type="radio" id="test" value="test" name="verify">
                <label for="test">Take the test!</label>
            </div>
            <div id="divlogin">
                <input type="radio" id="login" value="login" name="verify">
                <label for="test">Login to modify the test bank</label>
            </div>
        </form>
    </div>


    <div style="margin-top: 30px">
        <div id="hello">
            <form action="main" method="POST" id="testform" style="display: none">
                <div><input type="text" id="info" name="name" class="textfield" placeholder="Your name"></div>
                <div><button type="submit" id="commence">Begin your test</button></div>
            </form>
            <form action="admin" method="POST" id="loginform" style="display: none">
                <div><input type="text" id="username" class="textfield" name="NAME" placeholder="Username"></div>
                <div><input type="password" id="pass" class="textfield" name="PASSWORD" placeholder="Password"> </div>
                <div><button type="submit" id="submit" onclick="identify()">Login</button></div>
            </form>
        </div>
    </div>
</div>

</body>
<script>
    function choose() {
        let option = document.querySelector('input[name="verify"]:checked');
        let signal = option.getAttribute("value");
        console.log(signal);
        if (signal === "test") {
            document.getElementById("testform").style.display = 'block';
            document.getElementById("loginform").style.display = 'none';
        } else if (signal === "login") {
            document.getElementById("testform").style.display = 'none';
            document.getElementById("loginform").style.display = 'block';
        }
    }

    function identify() {
        let usr = document.getElementById("username").value;
        let pass = document.getElementById("pass").value;
        let map = {"NAME":usr,"PASSWORD":pass};
        console.log(map);
        let URL = "http://localhost:5000/myadmin"
        fetch(URL, {
            method: 'POST',
            redirect: 'follow',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify(map),
        })
            .then(response => response.json())
    }


</script>
</html>